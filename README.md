# JS-EPG
Javascript version of the Euclidean Pattern Generator

## Introduction
This is an application to create rhythm patterns that can be used in music. It doesn't produce any sounds by itself, but sends MIDI messages for other applications to receive. These applications are typically music programs like Ableton Live, Cubase or FL Studio. But MIDI messages can also be sent to external hardware instruments like drum machines, samplers or synthesizers. 

The application creates a specific type of patterns, known as Euclidean rhythms. These are generated by a mathematical algorithm and often resemble African and South-American traditional drum and percussion patterns. The application makes it easy to create polyrhythms, where patterns of different length play together to create interesting slowly evolving rhythms.

A desktop application can be downloaded for Windows, Mac and Linux, and it can be used as an online app that runs in the browser as well (Chrome and Chromium only at the moment). It is written in Javascript and uses the Electron framework to create the desktop versions.

## Euclidean rhythms
Euclidean rhythms are generated with a simple mathematical formula. It distributes an amount of pulses as evenly as possible over a period of time, where time is divided in equal parts. So, say you have four notes to divide over a sequence of sixteen steps, the result is:

``x . . . x . . . x . . . x . . .``

Each note is separated from the next by three rests, a typical house and techno kick drum pattern. 4 steps can be very evenly distributed over 16 steps: 16 / 4 = 4. More uneven divisions create more complex rhythms. 5 notes over 16 steps for example results in this pattern:

``x . . . x . . x . . x . . x . .``

Interesting polyrhythms can be created by combining patterns of different length. The patterns in the application go up to 64 steps in length.

The generation of Euclidean rhythms in music was discovered by Godfried Toussaint in 2004. His paper on this theory is online as a PDF file: [â€œThe Euclidean Algorithm Generates Traditional Musical Rhythms"][link_toussaint]

## Download and installation

Desktop applications will be available for Linux, Mac and Windows.

## Quick start

The application opens with just the controlbar visible at the top and the empty pattern area below.

* Create a pattern by double clicking the pattern area. A pattern wheel appears and its Settings panel opens at the right.
* You can start and stop the pattern with the play button in the controlbar.
* Open the Preferences panel with the 'cogwheel' button in the controlbar.
* Choose the MIDI output you want by toggling its button in the Network column. 'Network' means that the network of patterns will output MIDI notes on this port.
* The pattern you created will now send notes to your MIDI port on Channel 1 with Pitch 60 and Velocity 100, the default values of a new pattern (as you can see in the Settings panel).

[link_toussaint]: http://cgm.cs.mcgill.ca/~godfried/publications/banff.pdf


## Introduction (old)

JS-EPG is a Javascript version of the Euclidean Pattern Generator, a Java application I made several years ago. It has [its own repository](https://github.com/WouterHisschemoller/Euclidean-Pattern-Generator) here on GitHub.

This Javascript app generates rhythms that can be used to create music. The rhythms are generated by a mathematical formula that is based on the Euclidean Algorithm. These rhythms therefore became known as [Euclidean rhythms](https://en.wikipedia.org/wiki/Euclidean_rhythm).

JS-EPG outputs the rhythms as MIDI messages, so to actually hear any sounds you have to choose a MIDI output in the app that is connected to a MIDI equipped sound generator. That generator can be a software DAW like Ableton Live or a hardware drum machine, synthesizer or sampler.

JS-EPG uses the Javascript [Web MIDI API](https://www.w3.org/TR/webmidi/) to send MIDI messages. Only a few browsers support Web MIDI at the moment. [Check CanIUse.com](http://caniuse.com/#search=web%20midi%20api) for the current browser support.

## Usage
To run the app simply open index.html in a web browser. There are no dependencies on external online files and it doesn't need a server, so it can be used offline.

To add a rhythm pattern doubleclick anywhere on the canvas area and a pattern graphic will appear. A default new pattern has 16 steps and plays four notes, effectively a note on each beat as in a standard house or techno four-to-the-floor kick drum pattern.

There are a few keyboard shortcuts:

| Key       | Action                  |
| ---       | ---                     |
| Space     | Toggle start / stop     |
| Backspace | Delete selected pattern |

## Saving and exporting projects

Projects can be exported as a file to the local file system (the desktop for instance) by simply clicking the Export button (disk icon) in the header bar. This will present you with the computer's regular file save dialog.

A regular 'save' option to automatically overwrite the current project file doesn't exist. This is because Javascript doesn't have this kind of direct access to the computer's file system.

## Importing projects

Project files can be imported by simply clicking the Import button (open folder icon) in the header bar. This will present you with the computer's regular file save open dialog.

## Autosave

All settings are saved however to the browser's LocalStorage when the page unloads, and restored from LocalStorage when the page is loaded again. So you can shut down your browser and start it up the next day, and your settings and preferences will be restored. 

## Note
This app is a project in progress, so all of the above might not yet work at all.
